%% Checking Data deveation from normal distribution
clear

data_paths = {'E:\DOC\Data from Jaco\VS';'E:\DOC\Data from Jaco\MCS';...
    'E:\DOC\Data from Jaco\EMCS';'E:\DOC\Data from Jaco\CTRL'};
mac_data_paths = {'/Users/admin/Desktop/DACOBO_h/VS';'/Users/admin/Desktop/DACOBO_h/EMCS';...
    '/Users/admin/Desktop/DACOBO_h/MCS';'/Users/admin/Desktop/DACOBO_h/CTRL'};

conds = {'VS';'MCS';'EMCS';'CTRL'};
subconds = {'LSGS';'LSGD';'LDGS';'LDGD'};

for i = length(conds) % :-1:1                                                     % over conditions
    %    cd(data_paths{i})                                                       % changes conditions
    cd(mac_data_paths{i})                                                    % changes conditions
    %    [Dev_all.(sprintf(conds{i})) , subjects_chosen.(sprintf(conds{i})), sizes(i)] = Deviance_non_random(subconds);
    [Dev_all.(sprintf(conds{i})) , SE2.(sprintf(conds{i})) ] = Deviance_non_random(subconds);
end

%% Plotting deviation differences between conditions (VS,MCS, etc...) and subdata(LSGS/LSGD etc...)
% transferring dev values to full matrix
for i = length(conds):-1:1
    y(i,:) = cell2mat(struct2cell(Dev_all.(sprintf(conds{i}))));
end

% transferring SE values to full matrix
for i = length(conds):-1:1
    for ii = length(subconds):-1:1
        SE_full(i,ii) = SE2.(sprintf(conds{i}))(SE.(sprintf(subconds{ii})));
    end
end

bar(y)
title('Deviation from normal distribution')
set(gca,'xticklabel',conds)
ylabel('% Deviance')
legend(subconds,'location','nw')


hold on
errorbar(y,SE2,'.')